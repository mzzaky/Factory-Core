<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factory Upgrade System - FactoryCore Wiki</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #0a0c10;
            color: #e4e6ea;
            min-height: 100vh;
        }

        /* ‚îÄ‚îÄ Page Header ‚îÄ‚îÄ */
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
        }

        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #10b981;
        }

        .page-header p {
            color: #9ca3af;
            font-size: 1.15rem;
            margin-top: 10px;
        }

        /* ‚îÄ‚îÄ Breadcrumb ‚îÄ‚îÄ */
        .breadcrumb {
            max-width: 1200px;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .breadcrumb a {
            color: #6b7280;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb a:hover {
            color: #10b981;
        }

        .breadcrumb-sep {
            color: #4b5563;
        }

        .breadcrumb-current {
            color: #34d399;
            font-weight: 600;
        }

        /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
        .content-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 30px;
            align-items: start;
        }

        /* ‚îÄ‚îÄ Side Nav ‚îÄ‚îÄ */
        .side-nav {
            position: sticky;
            top: 20px;
            background: rgba(13, 17, 23, 0.95);
            border: 1px solid rgba(52, 211, 153, 0.15);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .nav-header {
            padding: 20px;
            border-bottom: 1px solid rgba(52, 211, 153, 0.1);
            font-weight: 700;
            color: #e4e6ea;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.85rem;
        }

        .nav-list {
            list-style: none;
            padding: 15px;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .nav-list a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border-radius: 8px;
            color: #9ca3af;
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .nav-list a:hover {
            background: rgba(52, 211, 153, 0.05);
            color: #d1fae5;
        }

        .nav-list a.active {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(4, 120, 87, 0.05) 100%);
            color: #34d399;
            border: 1px solid rgba(52, 211, 153, 0.2);
            font-weight: 600;
        }

        /* ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ */
        .main-content {
            background: #0d1117;
            border: 1px solid rgba(52, 211, 153, 0.15);
            border-radius: 16px;
            overflow: hidden;
        }

        .content-section {
            padding: 40px;
            border-bottom: 1px solid rgba(52, 211, 153, 0.08);
            scroll-margin-top: 20px;
        }

        .content-section:last-child {
            border-bottom: none;
        }

        .section-title {
            margin-bottom: 25px;
        }

        .section-title h2 {
            color: #10b981;
            font-size: 1.8rem;
            font-weight: 600;
            margin: 0 0 8px 0;
        }

        /* ‚îÄ‚îÄ Typography ‚îÄ‚îÄ */
        h3 {
            color: #34d399;
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        p {
            color: #d1d5db;
            line-height: 1.7;
            margin-bottom: 16px;
        }

        ul,
        ol {
            color: #d1d5db;
            margin-bottom: 20px;
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        strong {
            color: #34d399;
            font-weight: 600;
        }

        code {
            font-family: 'Fira Code', monospace;
            background: rgba(52, 211, 153, 0.1);
            padding: 3px 6px;
            border-radius: 5px;
            color: #34d399;
            font-size: 13px;
        }

        /* ‚îÄ‚îÄ Info / Warning Boxes ‚îÄ‚îÄ */
        .info-box {
            background: rgba(16, 185, 129, 0.05);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-left: 4px solid #10b981;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }

        .info-box-title {
            color: #10b981;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.05rem;
        }

        .warn-box {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(217, 119, 6, 0.03) 100%);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-left: 4px solid #fbbf24;
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.05), inset 0 0 12px rgba(245, 158, 11, 0.02);
            position: relative;
            overflow: hidden;
        }

        .warn-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(245, 158, 11, 0.1), transparent 50%);
            pointer-events: none;
        }

        .warn-box .info-box-title {
            color: #fbbf24;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.2);
            position: relative;
            z-index: 1;
        }

        .warn-box div:last-child {
            color: #e5e7eb;
            position: relative;
            z-index: 1;
        }

        /* ‚îÄ‚îÄ Feature Cards Grid ‚îÄ‚îÄ */
        .phases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .phase-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(52, 211, 153, 0.1);
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.2s ease, border-color 0.2s ease;
        }

        .phase-card:hover {
            border-color: rgba(52, 211, 153, 0.3);
            transform: translateY(-2px);
        }

        .phase-card .card-icon {
            font-size: 1.8rem;
            margin-bottom: 12px;
            display: block;
        }

        .phase-card h4 {
            color: #10b981;
            margin: 0 0 10px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .phase-card p {
            color: #9ca3af;
            font-size: 14px;
            margin: 0;
        }

        /* ‚îÄ‚îÄ Table ‚îÄ‚îÄ */
        .table-wrapper {
            margin: 25px 0;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(52, 211, 153, 0.15);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table thead {
            background: rgba(16, 185, 129, 0.1);
        }

        .data-table th {
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            color: #34d399;
            text-transform: uppercase;
        }

        .data-table td {
            padding: 12px 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            color: #c9cdd4;
            font-size: 14px;
        }

        .data-table td:first-child {
            font-weight: 600;
            color: #e4e6ea;
        }

        /* ‚îÄ‚îÄ Code Block ‚îÄ‚îÄ */
        .code-wrap {
            position: relative;
            margin: 20px 0;
        }

        .code-block {
            background: #090d13;
            border: 1px solid rgba(52, 211, 153, 0.18);
            border-radius: 10px;
            padding: 22px 24px;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 13px;
            line-height: 1.75;
            color: #abb2bf;
        }

        .code-block .cm {
            color: #5c6370;
            font-style: italic;
        }

        /* comment */
        .code-block .ck {
            color: #e06c75;
        }

        /* key */
        .code-block .cv {
            color: #98c379;
        }

        /* string value */
        .code-block .cn {
            color: #d19a66;
        }

        /* number value */
        .code-block .cs {
            color: #56b6c2;
        }

        /* section heading */
        .code-block .ci {
            color: #61afef;
        }

        /* inline tag / ¬ßcode */

        .code-lang-badge {
            position: absolute;
            top: 10px;
            right: 48px;
            background: rgba(52, 211, 153, 0.1);
            border: 1px solid rgba(52, 211, 153, 0.2);
            color: #34d399;
            font-family: 'Fira Code', monospace;
            font-size: 11px;
            padding: 2px 10px;
            border-radius: 20px;
            letter-spacing: 0.5px;
            pointer-events: none;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(52, 211, 153, 0.08);
            border: 1px solid rgba(52, 211, 153, 0.2);
            color: #34d399;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            background: rgba(52, 211, 153, 0.18);
        }

        .copy-btn.copied {
            color: #10b981;
            border-color: #10b981;
        }

        /* ‚îÄ‚îÄ Dev Tip Box ‚îÄ‚îÄ */
        .dev-tip {
            background: linear-gradient(135deg, rgba(97, 175, 239, 0.07) 0%, rgba(56, 139, 253, 0.03) 100%);
            border: 1px solid rgba(97, 175, 239, 0.25);
            border-left: 4px solid #61afef;
            border-radius: 10px;
            padding: 18px 20px;
            margin: 20px 0;
        }

        .dev-tip .info-box-title {
            color: #61afef;
        }

        /* ‚îÄ‚îÄ Research Summary Table ‚îÄ‚îÄ */
        .data-table td code {
            font-size: 12px;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            font-family: 'Fira Code', monospace;
        }

        .badge-pct {
            background: rgba(16, 185, 129, 0.12);
            color: #34d399;
            border: 1px solid rgba(16, 185, 129, 0.25);
        }

        .badge-flat {
            background: rgba(245, 158, 11, 0.12);
            color: #fbbf24;
            border: 1px solid rgba(245, 158, 11, 0.25);
        }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 900px) {
            .content-container {
                grid-template-columns: 1fr;
            }

            .side-nav {
                position: static;
                margin-bottom: 20px;
            }
        }

        @media (max-width: 768px) {
            .page-header h1 {
                font-size: 2.2rem;
            }

            .content-section {
                padding: 24px;
            }
        }
    </style>
</head>

<body>
    <div class="page-header">
        <h1>Upgrade System</h1>
        <p>Unlock Permanent Upgrades to Optimize Your Factory</p>
    </div>

    <div class="breadcrumb">
        <a href="wiki_index.html">Wiki Home</a>
        <span class="breadcrumb-sep">&raquo;</span>
        <a href="#">Systems</a>
        <span class="breadcrumb-sep">&raquo;</span>
        <span class="breadcrumb-current">Upgrade System</span>
    </div>

    <div class="content-container">
        <nav class="side-nav">
            <div class="nav-header">On This Page</div>
            <ul class="nav-list">
                <li><a href="#overview" class="active">Overview</a></li>
                <li><a href="#mechanics">Upgrade Mechanics</a></li>
                <li><a href="#requirements">Materials &amp; Times</a></li>
                <li><a href="#benefits">Benefits &amp; Trade-offs</a></li>
                <li><a href="#config-reference">Config Reference</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <!-- ‚ïê‚ïê‚ïê‚ïê OVERVIEW ‚ïê‚ïê‚ïê‚ïê -->
            <section class="content-section" id="overview">
                <div class="section-title">
                    <h2>Overview</h2>
                </div>
                <p>
                    The <strong>Factory Upgrade System</strong> enables players to directly improve their existing
                    factories.
                    Rather than building entirely new factories to increase throughput, you can invest capital and
                    resources to
                    level up your operations, making them faster and cheaper to run over time.
                </p>
                <div class="info-box">
                    <div class="info-box-title">üí° The Core Objective</div>
                    <div>Upgrading a factory is crucial for the mid-to-end game. It significantly reduces both the
                        <strong>production time</strong> and the <strong>monetary cost</strong> of recipes inside that
                        specific factory.
                    </div>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê UPGRADE MECHANICS ‚ïê‚ïê‚ïê‚ïê -->
            <section class="content-section" id="mechanics">
                <div class="section-title">
                    <h2>Upgrade Mechanics</h2>
                </div>
                <p>An upgrade requires money, materials, and real-life time to complete.</p>
                <ul>
                    <li><strong>Monetary Cost:</strong> The cost scales based on the base price of the factory type. The
                        default formula is: <code>Upgrade Cost = Base Price √ó 0.5 √ó Current Level</code>.</li>
                    <li><strong>Material Investments:</strong> Alongside money, physical resources from your inventory
                        are consumed. These requirements are fully configurable per level.</li>
                    <li><strong>Construction Time:</strong> Upgrades happen in real-time. Once initiated, a background
                        timer takes over. During this construction phase, you must wait for the upgrade to finish.</li>
                </ul>
                <div class="warn-box">
                    <div class="info-box-title">‚ö†Ô∏è Synergy with Research</div>
                    <div>The <strong>Nano-Construction Framework</strong> research globally reduces all factory upgrade
                        timers! A high-level research can slash upgrade times by a massive percentage automatically.
                    </div>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê MATERIALS & TIMES ‚ïê‚ïê‚ïê‚ïê -->
            <section class="content-section" id="requirements">
                <div class="section-title">
                    <h2>Materials &amp; Times</h2>
                </div>
                <p>Upgrading requires various combinations of resources as you progress into higher tiers. Below are the
                    default required intervals and materials up to the standard Level 5 cap.</p>

                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Target Level</th>
                                <th>Default Time</th>
                                <th>Items Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Level 2</td>
                                <td><code>60 seconds</code></td>
                                <td>5x <strong>Basic Gear</strong></td>
                            </tr>
                            <tr>
                                <td>Level 3</td>
                                <td><code>120 seconds</code></td>
                                <td>10x <strong>Basic Gear</strong>, 5x <strong>Advanced Gear</strong></td>
                            </tr>
                            <tr>
                                <td>Level 4</td>
                                <td><code>300 seconds</code></td>
                                <td>15x <strong>Basic Gear</strong>, 10x <strong>Advanced Gear</strong></td>
                            </tr>
                            <tr>
                                <td>Level 5</td>
                                <td><code>600 seconds</code></td>
                                <td>20x <strong>Basic Gear</strong>, 20x <strong>Advanced Gear</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê BENEFITS & TRADE-OFFS ‚ïê‚ïê‚ïê‚ïê -->
            <section class="content-section" id="benefits">
                <div class="section-title">
                    <h2>Benefits &amp; Trade-offs</h2>
                </div>
                <p>With every level unlocked, the factory becomes significantly more competitive, though keeping
                    higher-level factories incurs larger taxes.</p>

                <div class="phases-grid">
                    <div class="phase-card">
                        <span class="card-icon">üìâ</span>
                        <h4>Cost Reduction</h4>
                        <p>Reduces the money required to perform recipes inside the factory by a baseline
                            <strong>5.0%</strong> per level.
                        </p>
                    </div>
                    <div class="phase-card">
                        <span class="card-icon">‚è±Ô∏è</span>
                        <h4>Time Reduction</h4>
                        <p>Slashes the base manufacturing time for items by <strong>10.0%</strong> per level, increasing
                            throughput.</p>
                    </div>
                    <div class="phase-card">
                        <span class="card-icon">üßæ</span>
                        <h4>Heavier Taxes</h4>
                        <p>High-level factories generate a larger property valuation. A <strong>+2.5%</strong> tax
                            multiplier is added to your liabilities per level.</p>
                    </div>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê CONFIG REFERENCE ‚ïê‚ïê‚ïê‚ïê -->
            <section class="content-section" id="config-reference">
                <div class="section-title">
                    <h2>Config Reference</h2>
                </div>
                <p>
                    All configurations governing the Upgrade System reside within the main <code>config.yml</code> file
                    under the <code>factory:</code> section.
                </p>

                <div class="code-wrap">
                    <span class="code-lang-badge">YAML</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre class="code-block"><span class="cs">factory:</span>
  <span class="ck">max-level:</span> <span class="cn">5</span>
  <span class="ck">max-factories-per-player:</span> <span class="cn">3</span>

  <span class="cm"># Linear bonuses added per factory level</span>
  <span class="cs">level-bonuses:</span>
    <span class="ck">cost-reduction:</span> <span class="cn">5.0</span>
    <span class="ck">time-reduction:</span> <span class="cn">10.0</span>

  <span class="cm"># Required items to upgrade TO each level</span>
  <span class="cs">upgrade-requirements:</span>
    <span class="ck">2:</span>
      <span class="ck">basic_gear:</span> <span class="cn">5</span>
    <span class="ck">3:</span>
      <span class="ck">basic_gear:</span> <span class="cn">10</span>
      <span class="ck">advanced_gear:</span> <span class="cn">5</span>
    <span class="ck">4:</span>
      <span class="ck">basic_gear:</span> <span class="cn">15</span>
      <span class="ck">advanced_gear:</span> <span class="cn">10</span>
    <span class="ck">5:</span>
      <span class="ck">basic_gear:</span> <span class="cn">20</span>
      <span class="ck">advanced_gear:</span> <span class="cn">20</span>

  <span class="cm"># Duration in seconds to finish upgrading TO each level</span>
  <span class="cs">upgrade-time:</span>
    <span class="ck">2:</span> <span class="cn">60</span>
    <span class="ck">3:</span> <span class="cn">120</span>
    <span class="ck">4:</span> <span class="cn">300</span>
    <span class="ck">5:</span> <span class="cn">600</span></pre>
                </div>

                <div class="dev-tip">
                    <div class="info-box-title">üîß Creating Custom Upgrades</div>
                    <div>If you extend <code>max-level</code> beyond 5, ensure you supply both
                        <code>upgrade-requirements</code> and <code>upgrade-time</code> data for levels 6 and beyond, or
                        the upgrade menu may malfunction or default.
                    </div>
                </div>

            </section>
        </main>
    </div>

    <script>
        // Copy-to-clipboard for code blocks
        function copyCode(btn) {
            const pre = btn.closest('.code-wrap').querySelector('pre');
            navigator.clipboard.writeText(pre.innerText).then(() => {
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
            });
        }

        const sections = document.querySelectorAll('.content-section');
        const navLinks = document.querySelectorAll('.nav-list a');

        // Smooth scroll implementation to avoid Google Sites URL hash change issues
        navLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Intersection Observer for highlighting active link during scroll/view
        const observerOptions = {
            root: null, // Tracks viewport (works better in iframes usually)
            rootMargin: '0px',
            threshold: 0.3 // Highlights when 30% of the section is visible
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });
    </script>
</body>

</html>